{"version":3,"sources":["webpack:///client.ad9fd772.js","webpack:///./src/modules/registry.ts","webpack:///./src/render.tsx","webpack:///./src/modules/TransformVariables.ts","webpack:///./src/modules/MatrixUtils.ts","webpack:///./src/NodeConfig.tsx","webpack:///./src/modules/Module.tsx","webpack:///./src/modules/PresentationVariables.ts","webpack:///./src/index.tsx","webpack:///./src/App.tsx","webpack:///./src/modules/modify/Choose.tsx","webpack:///./src/modules/prim/Ellipse.tsx","webpack:///./src/modules/array/LinearArray.tsx","webpack:///./src/modules/prim/Ngon.tsx","webpack:///./src/dumbMemoize.ts","webpack:///./src/modules/prim/Rect.tsx","webpack:///./src/modules/array/RectArray.tsx","webpack:///./src/modules/modify/RemoveChildren.tsx","webpack:///./src/modules/modify/Xform.tsx","webpack:///./src/components/NodeTree.tsx","webpack:///./src/components/NodeConfigView.tsx","webpack:///./src/Context.tsx","webpack:///./src/RandomGenerator.ts","webpack:///./src/evaluator.ts","webpack:///./src/components/TreeToolbar.tsx","webpack:///./src/managers/TreeManager.tsx","webpack:///./src/Status.tsx","webpack:///./src/components/GlobalToolbar.tsx","webpack:///./src/components/Icon.tsx"],"names":["webpackJsonp","module","exports","__webpack_require__","Object","defineProperty","value","Choose_1","Ellipse_1","LinearArray_1","Ngon_1","Rect_1","RectArray_1","RemoveChildren_1","Xform_1","registry","Choose","default","Ellipse","LinearArray","Ngon","Rect","RectArray","RemoveChildren","Xform","keys","forEach","name","render","displayName","renderNode","context","nodeConfig","registry_1","Error","status","addVariables","id","variables","subcontext","e","console","error","renderNodesInto","targetArray","nodes","i","length","renderedElts","j","push","group","makeMatrix","_a","x","y","r","sx","sy","matrix","transformation_matrix_1","translate","isFinite","multiply","rotateDEG","scale","splitMatrixAndProps","props","newProps","assign","m1","m2","a","c","b","d","f","generateId","Math","floor","random","toString","duplicate","walk","config","lodash_1","cloneDeep","children","map","configure","moduleName","defaults","Module_1","getVariableDefaults","v","UniversalVariables","type","React","ReactDOM","App_1","wrapper","document","createElement","body","appendChild","__extends","this","extendStatics","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","NodeConfig_1","NodeTree_1","NodeConfigView_1","Context_1","TreeToolbar_1","TreeManager_1","Status_1","GlobalToolbar_1","DEFAULT_NODE_CONFIGS","seed","numberX","numberY","variableX","variableY","radius1","radius2","vertices","fill","App","_super","_this","apply","arguments","treeManager","TreeManager","state","selectedNodeId","rendered","activeTab","onSelectNode","setState","onChangeNodeVariable","variableName","newValue","changeNodeVariable","forceUpdate","onRepositionNode","sourceNodeId","targetNodeId","copy","copyNode","moveNode","onChangeTab","tabId","componentDidMount","addTreeUpdateListener","tree","renderDrawing","replaceTree","rootPseudoNode","renderChildren","selectedNodeConfig","getNodeOrNull","configContent","Fragment","selectedNode","nodeConfigs","getTree","onChange","width","height","Component","render_1","acceptsChildren","node","_b","evaluateNodeConfig","childIndex","indexVariable","index","parseInt","child","TransformVariables_1","MatrixUtils_1","concat","radiusX","radiusY","opacity","cx","cy","rx","ry","transform","toSVG","key","getId","number","variable","nNumber","round","parseFloat","__assign","t","s","n","call","PresentationVariables_1","dumbMemoize_1","TWO_PI","PI","generatePathString","tilt1","tilt2","path","radius","angle","cos","sin","isNaN","toFixed","join","dumbMemoize","fn","memo","memoizedFn","args","_i","argsStr","__spread","__read","o","m","Symbol","iterator","ar","next","done","evaluateFromNodeConfig","filterContext","keepExpression","keep","filter","evaluate","TreeNode","className","href","draggable","onClick","preventDefault","stopPropagation","onDragStart","event","dataTransfer","clearData","setData","effectAllowed","onDragOver","dropEffect","types","indexOf","altKey","onDrop","getData","TreeLevel","currentTarget","VariableConfigRow","extraControls","handleChange","target","NodeConfigView","moduleClass","variableDefinitions","variablesByGroup","groupBy","sort","colSpan","getVariablesForNode","getErrorsForNode","err","_evaluate","tag","expression","namespace","errorDefault","evaluator_1","evaluateExpression","addError","warn","memoizeOnFirstInvocation","creator","undefined","RandomGenerator_1","Context","parent","idPrefix","defaultNamespace","prepareNamespace","forNode","newVariables","mergedVariables","min","max","rng","val","additionalVariables","rand","bind","evaluateAll","expressionMap","evaluated","suffix","hashString","string","charCodeAt","createRandomGenerator","seedString","startsWith","expressionFnCache","Function","slice","test","nodeAcceptsChildren","react_simple_dropdown_1","TreeToolbar","dropdowns","handleAddNode","method","addChildNode","addSiblingNode","wrapNode","hideDropdowns","handleDeleteNode","withHierarchy","deleteNode","values","dropdown","hide","childMode","childText","allowAddSibling","parent_1","getNodeParentOrNull","disabled","ref","instance","wrap","DropdownTrigger","DropdownContent","addChild","addSibling","title","shiftKey","setImmediate","nodeCache","treeUpdateListeners","newTree","updateNodeCache","invokeTreeUpdateListeners","newNodeCache","listener","nodeId","cacheEntry","getNodeCacheEntry","getNode","getNodeParent","check","replaceOrEmsiblingNode","nodeToReplace","newNodes","replace","childList","splice","parentNodeId","newNode","addChildInternal","parentNode","wrappedNode","wrappedNodeParent","wrapperNode","doomedNode","doomedNodeParent","nodeParent","newParentNodeId","sourceNode","sourceNodeParent","copiedNode","Status","nodeErrors","nodeVariables","Set","add","from","Icon_1","GlobalToolbarIcons","fileTree","save","GlobalToolbar","tabs","icon","active","xmlns","viewBox"],"mappings":"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","file":"client.ad9fd772.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */,\n/* 1 */\n/*!*********************************!*\\\n  !*** ./src/modules/registry.ts ***!\n  \\*********************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Choose_1 = __webpack_require__(/*! ./modify/Choose */ 32);\nvar Ellipse_1 = __webpack_require__(/*! ./prim/Ellipse */ 33);\nvar LinearArray_1 = __webpack_require__(/*! ./array/LinearArray */ 34);\nvar Ngon_1 = __webpack_require__(/*! ./prim/Ngon */ 35);\nvar Rect_1 = __webpack_require__(/*! ./prim/Rect */ 37);\nvar RectArray_1 = __webpack_require__(/*! ./array/RectArray */ 38);\nvar RemoveChildren_1 = __webpack_require__(/*! ./modify/RemoveChildren */ 39);\nvar Xform_1 = __webpack_require__(/*! ./modify/Xform */ 40);\nvar registry = {\n    Choose: Choose_1.default,\n    Ellipse: Ellipse_1.default,\n    LinearArray: LinearArray_1.default,\n    Ngon: Ngon_1.default,\n    Rect: Rect_1.default,\n    RectArray: RectArray_1.default,\n    RemoveChildren: RemoveChildren_1.default,\n    Xform: Xform_1.default,\n};\nexports.default = registry;\nObject.keys(registry).forEach(function (name) {\n    registry[name].render.displayName = \"render_\" + name;\n});\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/modules/registry.ts\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/modules/registry.ts\"); } } })();\n\n/***/ }),\n/* 2 */\n/*!************************!*\\\n  !*** ./src/render.tsx ***!\n  \\************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar registry_1 = __webpack_require__(/*! ./modules/registry */ 1);\nfunction renderNode(context, nodeConfig) {\n    var module = registry_1.default[nodeConfig.module];\n    if (!module) {\n        throw new Error(\"not registered \" + nodeConfig.module);\n    }\n    try {\n        context.status.addVariables(nodeConfig.id, context.variables);\n        return module.render(context.subcontext(nodeConfig, {}, nodeConfig.id));\n    }\n    catch (e) {\n        console.error(e);\n        return [];\n    }\n}\nexports.renderNode = renderNode;\nfunction renderNodesInto(targetArray, nodes, context) {\n    for (var i = 0; i < nodes.length; i++) {\n        var renderedElts = renderNode(context, nodes[i]);\n        for (var j = 0; j < renderedElts.length; j++) {\n            targetArray.push(renderedElts[j]);\n        }\n    }\n}\nexports.renderNodesInto = renderNodesInto;\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/render.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/render.tsx\"); } } })();\n\n/***/ }),\n/* 3 */,\n/* 4 */\n/*!*******************************************!*\\\n  !*** ./src/modules/TransformVariables.ts ***!\n  \\*******************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar group = 'Transform';\nexports.default = [\n    { name: 'x', default: '0', group: group },\n    { name: 'y', default: '0', group: group },\n    { name: 'r', default: '0', group: group },\n    { name: 'sx', default: '1', group: group },\n    { name: 'sy', default: '1', group: group },\n];\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/modules/TransformVariables.ts\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/modules/TransformVariables.ts\"); } } })();\n\n/***/ }),\n/* 5 */\n/*!************************************!*\\\n  !*** ./src/modules/MatrixUtils.ts ***!\n  \\************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar transformation_matrix_1 = __webpack_require__(/*! transformation-matrix */ 3);\nvar multiply = function (m1, m2) {\n    return {\n        a: m1.a * m2.a + m1.c * m2.b,\n        b: m1.b * m2.a + m1.d * m2.b,\n        c: m1.a * m2.c + m1.c * m2.d,\n        d: m1.b * m2.c + m1.d * m2.d,\n        e: m1.a * m2.e + m1.c * m2.f + m1.e,\n        f: m1.b * m2.e + m1.d * m2.f + m1.f,\n    };\n};\nfunction makeMatrix(_a) {\n    var x = _a.x, y = _a.y, r = _a.r, sx = _a.sx, sy = _a.sy;\n    var matrix = transformation_matrix_1.translate(isFinite(x) ? x : 0, isFinite(y) ? y : 0);\n    if (isFinite(r)) {\n        matrix = multiply(matrix, transformation_matrix_1.rotateDEG(r));\n    }\n    if (isFinite(sx) && isFinite(sy)) {\n        matrix = multiply(matrix, transformation_matrix_1.scale(sx, sy));\n    }\n    return matrix;\n}\nexports.makeMatrix = makeMatrix;\nfunction splitMatrixAndProps(props) {\n    var matrix = makeMatrix(props);\n    var newProps = Object.assign({}, props);\n    delete newProps.x;\n    delete newProps.y;\n    delete newProps.r;\n    delete newProps.sx;\n    delete newProps.sy;\n    return { matrix: matrix, props: newProps };\n}\nexports.splitMatrixAndProps = splitMatrixAndProps;\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/modules/MatrixUtils.ts\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/modules/MatrixUtils.ts\"); } } })();\n\n/***/ }),\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */\n/*!****************************!*\\\n  !*** ./src/NodeConfig.tsx ***!\n  \\****************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Module_1 = __webpack_require__(/*! ./modules/Module */ 15);\nvar registry_1 = __webpack_require__(/*! ./modules/registry */ 1);\nvar lodash_1 = __webpack_require__(/*! lodash */ 6);\nfunction generateId() {\n    return \"\" + Math.floor(Math.random() * 0xFFFFFFFF).toString(36);\n}\nfunction duplicate(nodeConfig) {\n    function walk(nodeConfig) {\n        return {\n            id: generateId(),\n            module: nodeConfig.module,\n            config: lodash_1.cloneDeep(nodeConfig.config),\n            children: nodeConfig.children.map(walk),\n        };\n    }\n    return walk(nodeConfig);\n}\nexports.duplicate = duplicate;\nfunction configure(moduleName, variables, children) {\n    if (children === void 0) { children = []; }\n    var module = registry_1.default[moduleName];\n    var defaults = Module_1.getVariableDefaults(module);\n    return {\n        id: generateId(),\n        module: moduleName,\n        config: Object.assign({}, defaults, variables),\n        children: children,\n    };\n}\nexports.configure = configure;\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/NodeConfig.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/NodeConfig.tsx\"); } } })();\n\n/***/ }),\n/* 15 */\n/*!********************************!*\\\n  !*** ./src/modules/Module.tsx ***!\n  \\********************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getVariableDefaults(module) {\n    var defaults = {};\n    module.variables.forEach(function (v) {\n        defaults[v.name] = v.default;\n    });\n    return defaults;\n}\nexports.getVariableDefaults = getVariableDefaults;\nexports.UniversalVariables = [\n    { name: 'seed', default: '', group: 'Randomness' },\n];\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/modules/Module.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/modules/Module.tsx\"); } } })();\n\n/***/ }),\n/* 16 */\n/*!**********************************************!*\\\n  !*** ./src/modules/PresentationVariables.ts ***!\n  \\**********************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar group = 'Presentation';\nexports.default = [\n    { name: 'fill', default: '#333', group: group, type: 'color' },\n    { name: 'stroke', default: '', group: group, type: 'color' },\n    { name: 'strokeWidth', default: '0', group: group, type: 'number' },\n    { name: 'opacity', default: '1', group: group },\n];\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/modules/PresentationVariables.ts\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/modules/PresentationVariables.ts\"); } } })();\n\n/***/ }),\n/* 17 */,\n/* 18 */\n/*!**********************************************************************!*\\\n  !*** multi ./node_modules/react-hot-loader/patch.js ./src/index.tsx ***!\n  \\**********************************************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! /Users/akx/build/coil/node_modules/react-hot-loader/patch.js */19);\nmodule.exports = __webpack_require__(/*! /Users/akx/build/coil/src/index.tsx */22);\n\n\n/***/ }),\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */\n/*!***********************!*\\\n  !*** ./src/index.tsx ***!\n  \\***********************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __webpack_require__(/*! react */ 0);\nvar ReactDOM = __webpack_require__(/*! react-dom */ 13);\nvar App_1 = __webpack_require__(/*! ./App */ 31);\n__webpack_require__(/*! ./style.scss */ 62);\nvar wrapper = document.createElement('div');\nwrapper.id = 'wrapper';\ndocument.body.appendChild(wrapper);\nReactDOM.render(React.createElement(App_1.default, null), wrapper);\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/index.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/index.tsx\"); } } })();\n\n/***/ }),\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */,\n/* 29 */,\n/* 30 */,\n/* 31 */\n/*!*********************!*\\\n  !*** ./src/App.tsx ***!\n  \\*********************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __webpack_require__(/*! react */ 0);\nvar NodeConfig_1 = __webpack_require__(/*! ./NodeConfig */ 14);\nvar NodeTree_1 = __webpack_require__(/*! ./components/NodeTree */ 42);\nvar NodeConfigView_1 = __webpack_require__(/*! ./components/NodeConfigView */ 43);\nvar Context_1 = __webpack_require__(/*! ./Context */ 44);\nvar TreeToolbar_1 = __webpack_require__(/*! ./components/TreeToolbar */ 47);\nvar TreeManager_1 = __webpack_require__(/*! ./managers/TreeManager */ 53);\nvar Status_1 = __webpack_require__(/*! ./Status */ 57);\nvar GlobalToolbar_1 = __webpack_require__(/*! ./components/GlobalToolbar */ 58);\nvar DEFAULT_NODE_CONFIGS = [\n    NodeConfig_1.configure('RemoveChildren', {\n        'seed': 'foo',\n    }, [\n        NodeConfig_1.configure('RectArray', {\n            numberX: '7',\n            numberY: '7',\n            variableX: 'i',\n            variableY: 'j',\n        }, [\n            NodeConfig_1.configure('Ngon', {\n                radius1: '15',\n                radius2: '5',\n                vertices: '10',\n                x: '=15 + i * 30',\n                y: '=30 + j * 30',\n                fill: 'blue',\n            }),\n        ]),\n    ]),\n];\nvar App = /** @class */ (function (_super) {\n    __extends(App, _super);\n    function App() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.treeManager = new TreeManager_1.TreeManager();\n        _this.state = {\n            selectedNodeId: null,\n            rendered: null,\n            status: new Status_1.default(),\n            activeTab: 'tree',\n        };\n        _this.onSelectNode = function (nodeConfig) {\n            _this.setState({\n                selectedNodeId: (nodeConfig ? nodeConfig.id : null),\n            });\n        };\n        _this.onChangeNodeVariable = function (nodeConfig, variableName, newValue) {\n            _this.treeManager.changeNodeVariable(nodeConfig.id, variableName, newValue);\n            _this.forceUpdate(); // Avoid asynchronous input caret position problem :(\n        };\n        _this.onRepositionNode = function (sourceNodeId, targetNodeId, copy) {\n            if (copy) {\n                _this.treeManager.copyNode(sourceNodeId, targetNodeId);\n            }\n            else {\n                _this.treeManager.moveNode(sourceNodeId, targetNodeId);\n            }\n        };\n        _this.onChangeTab = function (tabId) {\n            _this.setState({ activeTab: tabId });\n        };\n        return _this;\n    }\n    App.prototype.componentDidMount = function () {\n        var _this = this;\n        this.treeManager.addTreeUpdateListener(function (tree) {\n            _this.renderDrawing(tree);\n        });\n        this.treeManager.replaceTree(DEFAULT_NODE_CONFIGS);\n    };\n    App.prototype.renderDrawing = function (tree) {\n        var status = new Status_1.default();\n        var rootPseudoNode = { id: 'root', module: 'root', config: {}, children: tree };\n        var context = new Context_1.default(status, rootPseudoNode);\n        var rendered = context.renderChildren();\n        this.setState({ rendered: rendered, status: status });\n    };\n    App.prototype.render = function () {\n        var _a = this.state, selectedNodeId = _a.selectedNodeId, rendered = _a.rendered, status = _a.status, activeTab = _a.activeTab;\n        var treeManager = this.treeManager;\n        var selectedNodeConfig = treeManager.getNodeOrNull(selectedNodeId);\n        var configContent = null;\n        switch (activeTab) {\n            case 'tree':\n                configContent = (React.createElement(React.Fragment, null,\n                    React.createElement(\"div\", { id: \"hierarchy\" },\n                        React.createElement(TreeToolbar_1.default, { treeManager: treeManager, selectedNode: selectedNodeConfig }),\n                        React.createElement(NodeTree_1.default, { nodeConfigs: treeManager.getTree(), selectedNode: selectedNodeConfig, onSelectNode: this.onSelectNode, onRepositionNode: this.onRepositionNode })),\n                    React.createElement(\"div\", { id: \"props\" }, selectedNodeConfig ?\n                        React.createElement(NodeConfigView_1.default, { nodeConfig: selectedNodeConfig, status: status, onChange: this.onChangeNodeVariable })\n                        : null)));\n        }\n        return (React.createElement(React.Fragment, null,\n            React.createElement(\"div\", { id: \"config\" },\n                React.createElement(GlobalToolbar_1.default, { activeTab: activeTab, onChangeTab: this.onChangeTab }),\n                configContent),\n            React.createElement(\"div\", { id: \"drawing\" },\n                React.createElement(\"svg\", { width: 800, height: 800 }, rendered))));\n    };\n    return App;\n}(React.Component));\nexports.default = App;\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/App.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/App.tsx\"); } } })();\n\n/***/ }),\n/* 32 */\n/*!***************************************!*\\\n  !*** ./src/modules/modify/Choose.tsx ***!\n  \\***************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar render_1 = __webpack_require__(/*! ../../render */ 2);\nexports.default = {\n    acceptsChildren: true,\n    variables: [\n        { name: 'childIndex', default: '0' },\n        { name: 'indexVariable', default: 'u' },\n    ],\n    render: function (context) {\n        var _a;\n        var node = context.node;\n        var _b = context.evaluateNodeConfig(node), childIndex = _b.childIndex, indexVariable = _b.indexVariable;\n        var index = parseInt(childIndex, 10);\n        var child = node.children[index % node.children.length];\n        var nodes = [];\n        if (child) {\n            var subcontext = context.subcontext(node, (_a = {},\n                _a[indexVariable] = childIndex,\n                _a), \"child\" + childIndex);\n            render_1.renderNodesInto(nodes, [child], subcontext);\n        }\n        return nodes;\n    },\n};\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/modules/modify/Choose.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/modules/modify/Choose.tsx\"); } } })();\n\n/***/ }),\n/* 33 */\n/*!**************************************!*\\\n  !*** ./src/modules/prim/Ellipse.tsx ***!\n  \\**************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __webpack_require__(/*! react */ 0);\nvar transformation_matrix_1 = __webpack_require__(/*! transformation-matrix */ 3);\nvar TransformVariables_1 = __webpack_require__(/*! ../TransformVariables */ 4);\nvar MatrixUtils_1 = __webpack_require__(/*! ../MatrixUtils */ 5);\nexports.default = {\n    variables: TransformVariables_1.default.concat([\n        { name: 'radiusX', default: '20' },\n        { name: 'radiusY', default: '20' },\n        { name: 'fill', default: '#333' },\n        { name: 'opacity', default: '1' },\n    ]),\n    render: function (context) {\n        var _a = MatrixUtils_1.splitMatrixAndProps(context.evaluateNodeConfig()), props = _a.props, matrix = _a.matrix;\n        var radiusX = props.radiusX, radiusY = props.radiusY, fill = props.fill, opacity = props.opacity;\n        return [\n            React.createElement(\"ellipse\", { cx: 0, cy: 0, rx: radiusX, ry: radiusY, fill: fill, opacity: opacity, transform: transformation_matrix_1.toSVG(matrix), key: context.getId() }),\n        ];\n    },\n};\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/modules/prim/Ellipse.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/modules/prim/Ellipse.tsx\"); } } })();\n\n/***/ }),\n/* 34 */\n/*!*******************************************!*\\\n  !*** ./src/modules/array/LinearArray.tsx ***!\n  \\*******************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar render_1 = __webpack_require__(/*! ../../render */ 2);\nexports.default = {\n    acceptsChildren: true,\n    variables: [\n        { name: 'number', default: '5' },\n        { name: 'variable', default: 'i' },\n    ],\n    render: function (context) {\n        var _a;\n        // tslint:disable-next-line:variable-name\n        var _b = context.evaluateNodeConfig(), number = _b.number, variable = _b.variable;\n        var nodes = [];\n        var nNumber = Math.round(parseFloat(number));\n        var node = context.node;\n        for (var i = 0; i < nNumber; i++) {\n            var subcontext = context.subcontext(node, (_a = {},\n                _a[variable] = i,\n                _a[variable + \"F\"] = i / (nNumber - 1),\n                _a), \"\" + i);\n            render_1.renderNodesInto(nodes, node.children, subcontext);\n        }\n        return nodes;\n    },\n};\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/modules/array/LinearArray.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/modules/array/LinearArray.tsx\"); } } })();\n\n/***/ }),\n/* 35 */\n/*!***********************************!*\\\n  !*** ./src/modules/prim/Ngon.tsx ***!\n  \\***********************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __webpack_require__(/*! react */ 0);\nvar TransformVariables_1 = __webpack_require__(/*! ../TransformVariables */ 4);\nvar MatrixUtils_1 = __webpack_require__(/*! ../MatrixUtils */ 5);\nvar PresentationVariables_1 = __webpack_require__(/*! ../PresentationVariables */ 16);\nvar transformation_matrix_1 = __webpack_require__(/*! transformation-matrix */ 3);\nvar dumbMemoize_1 = __webpack_require__(/*! ../../dumbMemoize */ 36);\nvar TWO_PI = Math.PI * 2;\nvar generatePathString = dumbMemoize_1.default(function (vertices, radius1, radius2, tilt1, tilt2) {\n    var path = [];\n    radius1 = parseFloat(radius1);\n    radius2 = parseFloat(radius2);\n    tilt1 = parseFloat(tilt1);\n    tilt2 = parseFloat(tilt2);\n    for (var i = 0; i < vertices; i++) {\n        var f = i / vertices;\n        var radius = (i % 2 === 0 ? radius1 : radius2);\n        var angle = (f + (i % 2 === 0 ? tilt1 : tilt2)) * TWO_PI;\n        var x = Math.cos(angle) * radius;\n        var y = Math.sin(angle) * radius;\n        if (!(isNaN(x) || isNaN(y))) {\n            path.push(\"\" + (i === 0 ? 'M' : 'L') + x.toFixed(3) + \",\" + y.toFixed(3));\n        }\n    }\n    if (path.length > 0) {\n        path.push('z');\n    }\n    return path.join(' ');\n});\nexports.default = {\n    variables: TransformVariables_1.default.concat(PresentationVariables_1.default).concat([\n        { name: 'vertices', default: '5' },\n        { name: 'radius1', default: '5' },\n        { name: 'radius2', default: '5' },\n        { name: 'tilt1', default: '0' },\n        { name: 'tilt2', default: '0' },\n    ]),\n    render: function (context) {\n        var node = context.node;\n        var _a = MatrixUtils_1.splitMatrixAndProps(context.evaluateNodeConfig(node)), props = _a.props, matrix = _a.matrix;\n        var path = generatePathString(props.vertices, props.radius1, props.radius2, props.tilt1, props.tilt2);\n        delete props.vertices;\n        delete props.radius1;\n        delete props.radius2;\n        delete props.tilt1;\n        delete props.tilt2;\n        return [React.createElement(\"path\", __assign({ d: path }, props, { key: context.getId(node.id), transform: transformation_matrix_1.toSVG(matrix) }))];\n    },\n};\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/modules/prim/Ngon.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/modules/prim/Ngon.tsx\"); } } })();\n\n/***/ }),\n/* 36 */\n/*!****************************!*\\\n  !*** ./src/dumbMemoize.ts ***!\n  \\****************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction dumbMemoize(fn) {\n    var memo = {};\n    var memoizedFn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var argsStr = args.join('\\x01');\n        if (argsStr in memo)\n            return memo[argsStr];\n        return memo[argsStr] = fn.apply(void 0, __spread(args));\n    };\n    memoizedFn.memo = memo;\n    return memoizedFn;\n}\nexports.default = dumbMemoize;\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/dumbMemoize.ts\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/dumbMemoize.ts\"); } } })();\n\n/***/ }),\n/* 37 */\n/*!***********************************!*\\\n  !*** ./src/modules/prim/Rect.tsx ***!\n  \\***********************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __webpack_require__(/*! react */ 0);\nvar transformation_matrix_1 = __webpack_require__(/*! transformation-matrix */ 3);\nvar TransformVariables_1 = __webpack_require__(/*! ../TransformVariables */ 4);\nvar MatrixUtils_1 = __webpack_require__(/*! ../MatrixUtils */ 5);\nvar PresentationVariables_1 = __webpack_require__(/*! ../PresentationVariables */ 16);\nexports.default = {\n    variables: TransformVariables_1.default.concat(PresentationVariables_1.default).concat([\n        { name: 'width', default: '20' },\n        { name: 'height', default: '20' },\n    ]),\n    render: function (context) {\n        var node = context.node;\n        var _a = MatrixUtils_1.splitMatrixAndProps(context.evaluateNodeConfig(node)), props = _a.props, matrix = _a.matrix;\n        return [\n            React.createElement(\"rect\", __assign({ x: -props.width / 2, y: -props.height / 2, transform: transformation_matrix_1.toSVG(matrix), key: context.getId() }, props)),\n        ];\n    },\n};\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/modules/prim/Rect.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/modules/prim/Rect.tsx\"); } } })();\n\n/***/ }),\n/* 38 */\n/*!*****************************************!*\\\n  !*** ./src/modules/array/RectArray.tsx ***!\n  \\*****************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar render_1 = __webpack_require__(/*! ../../render */ 2);\nexports.default = {\n    acceptsChildren: true,\n    variables: [\n        { name: 'numberX', default: '5' },\n        { name: 'numberY', default: '5' },\n        { name: 'variableX', default: 'vx' },\n        { name: 'variableY', default: 'vy' },\n    ],\n    render: function (context) {\n        var _a;\n        var node = context.node;\n        // tslint:disable-next-line:prefer-const\n        var _b = context.evaluateNodeConfig(node), numberX = _b.numberX, numberY = _b.numberY, variableX = _b.variableX, variableY = _b.variableY;\n        var nodes = [];\n        numberX = Math.round(parseFloat(numberX));\n        numberY = Math.round(parseFloat(numberY));\n        for (var y = 0; y < numberY; y++) {\n            for (var x = 0; x < numberX; x++) {\n                var subcontext = context.subcontext(node, (_a = {},\n                    _a[variableX] = x,\n                    _a[variableY] = y,\n                    _a[variableX + \"F\"] = x / (numberX - 1),\n                    _a[variableY + \"F\"] = y / (numberY - 1),\n                    _a), x + \"x\" + y);\n                render_1.renderNodesInto(nodes, node.children, subcontext);\n            }\n        }\n        return nodes;\n    },\n};\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/modules/array/RectArray.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/modules/array/RectArray.tsx\"); } } })();\n\n/***/ }),\n/* 39 */\n/*!***********************************************!*\\\n  !*** ./src/modules/modify/RemoveChildren.tsx ***!\n  \\***********************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar render_1 = __webpack_require__(/*! ../../render */ 2);\nexports.default = {\n    acceptsChildren: true,\n    variables: [\n        { name: 'keep', default: '=rand() < .5' },\n        { name: 'indexVariable', default: 'i' },\n    ],\n    render: function (context) {\n        var node = context.node;\n        var indexVariable = context.evaluateFromNodeConfig('indexVariable');\n        var nodes = [];\n        render_1.renderNodesInto(nodes, node.children, context);\n        var filterContext = context.subcontext(node);\n        var keepExpression = node.config.keep;\n        return nodes.filter(function (child, index) {\n            var _a;\n            return (filterContext.evaluate(\"keep \" + index, keepExpression, (_a = {}, _a[indexVariable] = index, _a)));\n        });\n    },\n};\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/modules/modify/RemoveChildren.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/modules/modify/RemoveChildren.tsx\"); } } })();\n\n/***/ }),\n/* 40 */\n/*!**************************************!*\\\n  !*** ./src/modules/modify/Xform.tsx ***!\n  \\**************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __webpack_require__(/*! react */ 0);\nvar TransformVariables_1 = __webpack_require__(/*! ../TransformVariables */ 4);\nvar transformation_matrix_1 = __webpack_require__(/*! transformation-matrix */ 3);\nvar MatrixUtils_1 = __webpack_require__(/*! ../MatrixUtils */ 5);\nexports.default = {\n    acceptsChildren: true,\n    variables: TransformVariables_1.default.concat([\n        { name: 'opacity', default: '1' },\n    ]),\n    render: function (context) {\n        var nodes = context.renderChildren();\n        var _a = MatrixUtils_1.splitMatrixAndProps(context.evaluateNodeConfig()), props = _a.props, matrix = _a.matrix;\n        var opacity = props.opacity;\n        return [React.createElement(\"g\", { transform: transformation_matrix_1.toSVG(matrix), opacity: opacity }, nodes)];\n    },\n};\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/modules/modify/Xform.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/modules/modify/Xform.tsx\"); } } })();\n\n/***/ }),\n/* 41 */,\n/* 42 */\n/*!*************************************!*\\\n  !*** ./src/components/NodeTree.tsx ***!\n  \\*************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __webpack_require__(/*! react */ 0);\nvar registry_1 = __webpack_require__(/*! ../modules/registry */ 1);\nvar DRAG_AND_DROP_DATA_ID = 'application/x-coil-nodeid';\nvar TreeNode = function (_a) {\n    var nodeConfig = _a.nodeConfig, selectedNode = _a.selectedNode, onSelectNode = _a.onSelectNode, onRepositionNode = _a.onRepositionNode;\n    return (React.createElement(\"li\", { className: selectedNode === nodeConfig ? 'selected' : '' },\n        React.createElement(\"a\", { href: \"#\", draggable: true, onClick: function (e) {\n                onSelectNode(nodeConfig);\n                e.preventDefault();\n                e.stopPropagation();\n            }, onDragStart: function (event) {\n                event.dataTransfer.clearData();\n                event.dataTransfer.setData(DRAG_AND_DROP_DATA_ID, nodeConfig.id);\n                event.dataTransfer.effectAllowed = 'all';\n            }, onDragOver: function (event) {\n                event.dataTransfer.dropEffect = 'none';\n                if (event.dataTransfer.types.indexOf(DRAG_AND_DROP_DATA_ID) > -1) {\n                    if (registry_1.default[nodeConfig.module].acceptsChildren) {\n                        event.dataTransfer.dropEffect = (event.altKey ? 'copy' : 'link');\n                        event.preventDefault();\n                    }\n                }\n            }, onDrop: function (event) {\n                var sourceNodeId = event.dataTransfer.getData(DRAG_AND_DROP_DATA_ID);\n                event.dataTransfer.dropEffect = (event.altKey ? 'copy' : 'link');\n                var copy = (event.dataTransfer.dropEffect === 'copy');\n                onRepositionNode(sourceNodeId, nodeConfig.id, copy);\n            } }, nodeConfig.module),\n        nodeConfig.children.length ?\n            React.createElement(TreeLevel, { nodeConfigs: nodeConfig.children, selectedNode: selectedNode, onSelectNode: onSelectNode, onRepositionNode: onRepositionNode })\n            : null));\n};\nvar TreeLevel = function (_a) {\n    var nodeConfigs = _a.nodeConfigs, selectedNode = _a.selectedNode, onSelectNode = _a.onSelectNode, onRepositionNode = _a.onRepositionNode;\n    return (React.createElement(\"ul\", null, nodeConfigs.map(function (nodeConfig) { return (React.createElement(TreeNode, { key: nodeConfig.id, nodeConfig: nodeConfig, selectedNode: selectedNode, onSelectNode: onSelectNode, onRepositionNode: onRepositionNode })); })));\n};\nexports.default = (function (_a) {\n    var nodeConfigs = _a.nodeConfigs, selectedNode = _a.selectedNode, onSelectNode = _a.onSelectNode, onRepositionNode = _a.onRepositionNode;\n    return (React.createElement(\"div\", { id: \"tree\", onClick: function (e) {\n            if (e.currentTarget.id === 'tree') {\n                onSelectNode(null);\n            }\n        } },\n        React.createElement(TreeLevel, { nodeConfigs: nodeConfigs, selectedNode: selectedNode, onSelectNode: onSelectNode, onRepositionNode: onRepositionNode })));\n});\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/components/NodeTree.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/components/NodeTree.tsx\"); } } })();\n\n/***/ }),\n/* 43 */\n/*!*******************************************!*\\\n  !*** ./src/components/NodeConfigView.tsx ***!\n  \\*******************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __webpack_require__(/*! react */ 0);\nvar registry_1 = __webpack_require__(/*! ../modules/registry */ 1);\nvar Module_1 = __webpack_require__(/*! ../modules/Module */ 15);\nvar lodash_1 = __webpack_require__(/*! lodash */ 6);\nvar VariableConfigRow = function (_a) {\n    var variable = _a.variable, nodeConfig = _a.nodeConfig, onChange = _a.onChange, status = _a.status;\n    var extraControls = null;\n    var handleChange = (function (event) { return onChange(nodeConfig, variable.name, event.target.value.toString()); });\n    if (variable.type === 'color') {\n        extraControls = (React.createElement(\"input\", { type: \"color\", value: nodeConfig.config[variable.name] || '', onChange: handleChange }));\n    }\n    return (React.createElement(\"tr\", { className: \"variable-config-row\" },\n        React.createElement(\"th\", null, variable.name),\n        React.createElement(\"td\", null,\n            React.createElement(\"input\", { type: \"text\", value: nodeConfig.config[variable.name] || '', onChange: handleChange })),\n        React.createElement(\"td\", null, extraControls)));\n};\nvar NodeConfigView = /** @class */ (function (_super) {\n    __extends(NodeConfigView, _super);\n    function NodeConfigView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NodeConfigView.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, nodeConfig = _a.nodeConfig, status = _a.status;\n        var moduleClass = registry_1.default[nodeConfig.module];\n        var variableDefinitions = moduleClass.variables.concat(Module_1.UniversalVariables);\n        var variablesByGroup = lodash_1.groupBy(variableDefinitions, function (v) { return (v.group || 'Other'); });\n        return (React.createElement(\"div\", null,\n            React.createElement(\"table\", null,\n                React.createElement(\"tbody\", null, Object.keys(variablesByGroup).sort().map(function (group) { return React.createElement(React.Fragment, { key: group },\n                    React.createElement(\"tr\", { key: \"#\" + group, className: \"group-separator\" },\n                        React.createElement(\"th\", { colSpan: 3 }, group)),\n                    variablesByGroup[group].map(function (variable) { return (React.createElement(VariableConfigRow, { key: variable.name, variable: variable, nodeConfig: nodeConfig, status: status, onChange: _this.props.onChange })); })); }))),\n            React.createElement(\"div\", { className: \"debug\" },\n                \"Variables last render: \",\n                status.getVariablesForNode(nodeConfig.id).join(', ')),\n            React.createElement(\"ul\", { className: \"errors\" }, status.getErrorsForNode(nodeConfig.id).map(function (err, i) { return React.createElement(\"li\", { key: i }, err); }))));\n    };\n    return NodeConfigView;\n}(React.Component));\nexports.default = NodeConfigView;\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/components/NodeConfigView.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/components/NodeConfigView.tsx\"); } } })();\n\n/***/ }),\n/* 44 */\n/*!*************************!*\\\n  !*** ./src/Context.tsx ***!\n  \\*************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RandomGenerator_1 = __webpack_require__(/*! ./RandomGenerator */ 45);\nvar evaluator_1 = __webpack_require__(/*! ./evaluator */ 46);\nvar render_1 = __webpack_require__(/*! ./render */ 2);\nfunction _evaluate(status, node, tag, expression, namespace, errorDefault) {\n    if (errorDefault === void 0) { errorDefault = null; }\n    try {\n        return evaluator_1.evaluateExpression(expression, namespace);\n    }\n    catch (err) {\n        status.addError(node.id, tag + \": \" + err);\n        console.warn(err);\n        return errorDefault;\n    }\n}\nfunction memoizeOnFirstInvocation(creator) {\n    var t;\n    return function () {\n        if (t === undefined) {\n            t = creator();\n        }\n        return t;\n    };\n}\nvar Context = /** @class */ (function () {\n    function Context(status, node, parent, variables, idPrefix) {\n        if (parent === void 0) { parent = null; }\n        if (variables === void 0) { variables = {}; }\n        if (idPrefix === void 0) { idPrefix = ''; }\n        this.status = status;\n        this.node = node;\n        this.parent = parent;\n        this.variables = variables;\n        this.idPrefix = idPrefix;\n        this.defaultNamespace = this.prepareNamespace();\n    }\n    Context.prototype.subcontext = function (forNode, newVariables, idPrefix) {\n        if (newVariables === void 0) { newVariables = {}; }\n        if (idPrefix === void 0) { idPrefix = ''; }\n        var mergedVariables = Object.assign({}, this.variables, newVariables);\n        return new Context(this.status, forNode, this, mergedVariables, this.idPrefix + \".\" + idPrefix);\n    };\n    Context.prototype.random = function (min, max) {\n        if (!this.rng) {\n            var seed = this.evaluateFromNodeConfig('seed');\n            this.rng = RandomGenerator_1.default(seed);\n        }\n        var val = this.rng();\n        if (min !== undefined) {\n            if (max === undefined) {\n                return val * min;\n            }\n            return min + val * (max - min);\n        }\n        return val;\n    };\n    Context.prototype.prepareNamespace = function (additionalVariables) {\n        var _this = this;\n        return memoizeOnFirstInvocation(function () { return (__assign({ rand: _this.random.bind(_this) }, _this.variables, additionalVariables)); });\n    };\n    Context.prototype.evaluateFromNodeConfig = function (key) {\n        var expression = this.node.config[key];\n        if (expression === undefined)\n            return null;\n        return _evaluate(this.status, this.node, key, expression, this.defaultNamespace);\n    };\n    Context.prototype.evaluate = function (tag, expression, additionalVariables) {\n        var namespace = this.prepareNamespace(additionalVariables);\n        return _evaluate(this.status, this.node, tag, expression, namespace);\n    };\n    Context.prototype.evaluateAll = function (node, expressionMap, additionalVariables) {\n        var evaluated = {};\n        var namespace = this.prepareNamespace(additionalVariables);\n        for (var tag in expressionMap) {\n            var expression = expressionMap[tag];\n            if (expression !== null) {\n                evaluated[tag] = _evaluate(this.status, this.node, tag, expression, namespace);\n            }\n        }\n        return evaluated;\n    };\n    Context.prototype.evaluateNodeConfig = function (node) {\n        if (node === void 0) { node = this.node; }\n        return this.evaluateAll(node, node.config);\n    };\n    Context.prototype.getId = function (suffix) {\n        if (suffix === void 0) { suffix = this.node.id; }\n        return this.idPrefix + suffix;\n    };\n    Context.prototype.renderChildren = function (context) {\n        if (context === void 0) { context = this; }\n        var nodes = [];\n        render_1.renderNodesInto(nodes, this.node.children, context);\n        return nodes;\n    };\n    return Context;\n}());\nexports.default = Context;\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/Context.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/Context.tsx\"); } } })();\n\n/***/ }),\n/* 45 */\n/*!********************************!*\\\n  !*** ./src/RandomGenerator.ts ***!\n  \\********************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction hashString(string) {\n    var seed = 0;\n    for (var i = 0; i < string.length; i++) {\n        seed ^= (i % 16) << string.charCodeAt(i);\n    }\n    return seed;\n}\nfunction createRandomGenerator(seedString) {\n    var seed = (seedString ? hashString(seedString) : (Math.random() * 2147483647));\n    var next = function () {\n        return seed = seed * 16807 % 2147483647;\n    };\n    return function nextFloat() {\n        return (next() - 1) / 2147483646;\n    };\n}\nexports.default = createRandomGenerator;\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/RandomGenerator.ts\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/RandomGenerator.ts\"); } } })();\n\n/***/ }),\n/* 46 */\n/*!**************************!*\\\n  !*** ./src/evaluator.ts ***!\n  \\**************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar expressionFnCache = {};\nfunction evaluateExpression(expression, namespace) {\n    if (expression.startsWith('=')) {\n        var exprFun = (expression in expressionFnCache ?\n            expressionFnCache[expression] :\n            expressionFnCache[expression] = new Function('namespace', \"with(namespace) { return \" + expression.slice(1) + \"}\"));\n        return exprFun(namespace());\n    }\n    if (/[+-][0-9.]+/.test(expression)) {\n        return parseFloat(expression);\n    }\n    return \"\" + expression;\n}\nexports.evaluateExpression = evaluateExpression;\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/evaluator.ts\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/evaluator.ts\"); } } })();\n\n/***/ }),\n/* 47 */\n/*!****************************************!*\\\n  !*** ./src/components/TreeToolbar.tsx ***!\n  \\****************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __webpack_require__(/*! react */ 0);\nvar react_simple_dropdown_1 = __webpack_require__(/*! react-simple-dropdown */ 48);\nvar registry_1 = __webpack_require__(/*! ../modules/registry */ 1);\nfunction nodeAcceptsChildren(node) {\n    return (node && registry_1.default[node.module] && registry_1.default[node.module].acceptsChildren);\n}\nvar TreeToolbar = /** @class */ (function (_super) {\n    __extends(TreeToolbar, _super);\n    function TreeToolbar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.dropdowns = {};\n        return _this;\n    }\n    TreeToolbar.prototype.handleAddNode = function (method, module) {\n        var _a = this.props, treeManager = _a.treeManager, selectedNode = _a.selectedNode;\n        switch (method) {\n            case 'child':\n                treeManager.addChildNode((selectedNode ? selectedNode.id : null), module);\n                break;\n            case 'sibling':\n                treeManager.addSiblingNode(selectedNode.id, module);\n                break;\n            case 'wrap':\n                treeManager.wrapNode(selectedNode.id, module);\n        }\n        this.hideDropdowns();\n    };\n    TreeToolbar.prototype.handleDeleteNode = function (withHierarchy) {\n        var _a = this.props, treeManager = _a.treeManager, selectedNode = _a.selectedNode;\n        treeManager.deleteNode(selectedNode.id, withHierarchy);\n    };\n    TreeToolbar.prototype.hideDropdowns = function () {\n        Object.values(this.dropdowns).forEach(function (dropdown) {\n            return dropdown.hide();\n        });\n    };\n    TreeToolbar.prototype.render = function () {\n        var _this = this;\n        var selectedNode = this.props.selectedNode;\n        var childMode = null;\n        var childText = 'Node';\n        var allowAddSibling = false;\n        if (selectedNode === null) {\n            childMode = 'child';\n            childText = 'Node';\n        }\n        if (nodeAcceptsChildren(selectedNode)) {\n            childMode = 'child';\n            childText = 'Child';\n        }\n        if (selectedNode) {\n            var parent_1 = this.props.treeManager.getNodeParentOrNull(selectedNode.id);\n            if (parent_1 === null || nodeAcceptsChildren(parent_1)) {\n                allowAddSibling = true;\n            }\n        }\n        return (React.createElement(\"div\", { id: \"tree-toolbar\", className: \"toolbar\" },\n            React.createElement(react_simple_dropdown_1.default, { disabled: !selectedNode, ref: function (instance) {\n                    _this.dropdowns.wrap = instance;\n                } },\n                React.createElement(react_simple_dropdown_1.DropdownTrigger, { className: \"btn\" }, \"Wrap...\"),\n                React.createElement(react_simple_dropdown_1.DropdownContent, { className: \"node-select\" }, Object.keys(registry_1.default).filter(function (module) { return registry_1.default[module].acceptsChildren; }).map(function (module) { return (React.createElement(\"a\", { href: \"#\", key: module, onClick: function () { return _this.handleAddNode('wrap', module); } }, module)); }))),\n            React.createElement(react_simple_dropdown_1.default, { disabled: !childMode, ref: function (instance) {\n                    _this.dropdowns.addChild = instance;\n                } },\n                React.createElement(react_simple_dropdown_1.DropdownTrigger, { className: \"btn\" },\n                    \"Add \",\n                    childText,\n                    \"...\"),\n                React.createElement(react_simple_dropdown_1.DropdownContent, { className: \"node-select\" }, Object.keys(registry_1.default).map(function (module) { return (React.createElement(\"a\", { href: \"#\", key: module, onClick: function () { return _this.handleAddNode('child', module); } }, module)); }))),\n            React.createElement(react_simple_dropdown_1.default, { disabled: !allowAddSibling, ref: function (instance) {\n                    _this.dropdowns.addSibling = instance;\n                } },\n                React.createElement(react_simple_dropdown_1.DropdownTrigger, { className: \"btn\" }, \"Add Sibling...\"),\n                React.createElement(react_simple_dropdown_1.DropdownContent, { className: \"node-select\" }, Object.keys(registry_1.default).map(function (module) { return (React.createElement(\"a\", { href: \"#\", key: module, onClick: function () { return _this.handleAddNode('sibling', module); } }, module)); }))),\n            React.createElement(\"div\", { className: 'btn ' + (selectedNode ? '' : 'disabled'), title: \"Shift-click to delete with hierarchy\", onClick: function (event) {\n                    _this.handleDeleteNode(event.shiftKey);\n                    event.preventDefault();\n                } }, \"Delete\")));\n    };\n    return TreeToolbar;\n}(React.Component));\nexports.default = TreeToolbar;\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/components/TreeToolbar.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/components/TreeToolbar.tsx\"); } } })();\n\n/***/ }),\n/* 48 */,\n/* 49 */,\n/* 50 */,\n/* 51 */,\n/* 52 */,\n/* 53 */\n/*!**************************************!*\\\n  !*** ./src/managers/TreeManager.tsx ***!\n  \\**************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(setImmediate) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar NodeConfig_1 = __webpack_require__(/*! ../NodeConfig */ 14);\nvar lodash_1 = __webpack_require__(/*! lodash */ 6);\nvar TreeManager = /** @class */ (function () {\n    function TreeManager() {\n        this.tree = [];\n        this.nodeCache = {};\n        this.treeUpdateListeners = [];\n    }\n    TreeManager.prototype.replaceTree = function (newTree) {\n        this.tree = lodash_1.cloneDeep(newTree);\n        this.updateNodeCache();\n        this.invokeTreeUpdateListeners();\n    };\n    TreeManager.prototype.updateNodeCache = function () {\n        var newNodeCache = {};\n        function walk(node, parent) {\n            newNodeCache[node.id] = { node: node, parent: parent };\n            node.children.forEach(function (child) { return walk(child, node); });\n        }\n        this.tree.forEach(function (node) { return walk(node, null); });\n        this.nodeCache = newNodeCache;\n    };\n    TreeManager.prototype.invokeTreeUpdateListeners = function () {\n        var _this = this;\n        setImmediate(function () {\n            _this.treeUpdateListeners.forEach(function (listener) {\n                listener(_this.tree);\n            });\n        });\n    };\n    TreeManager.prototype.getNodeOrNull = function (nodeId) {\n        var cacheEntry = this.getNodeCacheEntry(nodeId, false);\n        return (cacheEntry ? cacheEntry.node : null);\n    };\n    TreeManager.prototype.getNodeParentOrNull = function (nodeId) {\n        var cacheEntry = this.getNodeCacheEntry(nodeId, false);\n        return (cacheEntry ? cacheEntry.parent : null);\n    };\n    TreeManager.prototype.getNode = function (nodeId) {\n        return this.getNodeCacheEntry(nodeId).node;\n    };\n    TreeManager.prototype.getNodeParent = function (nodeId) {\n        return this.getNodeCacheEntry(nodeId).parent;\n    };\n    TreeManager.prototype.getNodeCacheEntry = function (nodeId, check) {\n        if (check === void 0) { check = true; }\n        var cacheEntry = this.nodeCache[nodeId];\n        if (check && !cacheEntry) {\n            throw new Error(\"invalid node \" + nodeId);\n        }\n        return (cacheEntry ? cacheEntry : null);\n    };\n    TreeManager.prototype.replaceOrEmsiblingNode = function (parent, nodeToReplace, newNodes, replace) {\n        var childList = (parent === null ? this.tree : parent.children);\n        var childIndex = childList.indexOf(nodeToReplace);\n        if (childIndex > -1) {\n            var args = [childIndex, (replace ? 1 : 0)].concat(newNodes);\n            childList.splice.apply(childList, args);\n        }\n    };\n    TreeManager.prototype.getTree = function () {\n        return this.tree;\n    };\n    TreeManager.prototype.addTreeUpdateListener = function (listener) {\n        this.treeUpdateListeners.push(listener);\n    };\n    TreeManager.prototype.changeNodeVariable = function (nodeId, variableName, value) {\n        var node = this.getNode(nodeId);\n        node.config[variableName] = value;\n        this.invokeTreeUpdateListeners();\n    };\n    TreeManager.prototype.addChildNode = function (parentNodeId, module) {\n        var newNode = NodeConfig_1.configure(module, {});\n        this.addChildInternal(parentNodeId, newNode);\n        this.updateNodeCache();\n        this.invokeTreeUpdateListeners();\n        return newNode;\n    };\n    TreeManager.prototype.addChildInternal = function (parentNodeId, newNode) {\n        if (parentNodeId) {\n            var parentNode = this.getNode(parentNodeId);\n            parentNode.children.push(newNode);\n            return parentNode;\n        }\n        else {\n            this.tree.push(newNode);\n            return null;\n        }\n    };\n    TreeManager.prototype.wrapNode = function (parentNodeId, module) {\n        var wrappedNode = this.getNode(parentNodeId);\n        var wrappedNodeParent = this.getNodeParent(parentNodeId);\n        var wrapperNode = NodeConfig_1.configure(module, {}, [wrappedNode]);\n        this.replaceOrEmsiblingNode(wrappedNodeParent, wrappedNode, [wrapperNode], true);\n        this.updateNodeCache();\n        this.invokeTreeUpdateListeners();\n        return wrapperNode;\n    };\n    TreeManager.prototype.deleteNode = function (nodeId, withHierarchy) {\n        var doomedNode = this.getNode(nodeId);\n        var doomedNodeParent = this.getNodeParent(nodeId);\n        this.replaceOrEmsiblingNode(doomedNodeParent, doomedNode, (withHierarchy ? [] : doomedNode.children), true);\n        this.updateNodeCache();\n        this.invokeTreeUpdateListeners();\n    };\n    TreeManager.prototype.addSiblingNode = function (nodeId, module) {\n        var newNode = NodeConfig_1.configure(module, {});\n        var node = this.getNode(nodeId);\n        var nodeParent = this.getNodeParent(nodeId);\n        this.replaceOrEmsiblingNode(nodeParent, node, [newNode], false);\n        this.updateNodeCache();\n        this.invokeTreeUpdateListeners();\n    };\n    TreeManager.prototype.moveNode = function (sourceNodeId, newParentNodeId) {\n        if (sourceNodeId === newParentNodeId) {\n            return false;\n        }\n        var sourceNode = this.getNode(sourceNodeId);\n        var sourceNodeParent = this.getNodeParent(sourceNodeId);\n        // Remove from parent...\n        this.replaceOrEmsiblingNode(sourceNodeParent, sourceNode, [], true);\n        // Add to new parent.\n        this.addChildInternal(newParentNodeId, sourceNode);\n        this.updateNodeCache();\n        this.invokeTreeUpdateListeners();\n        return true;\n    };\n    TreeManager.prototype.copyNode = function (sourceNodeId, targetNodeId) {\n        var copiedNode = NodeConfig_1.duplicate(this.getNode(sourceNodeId));\n        this.addChildInternal(targetNodeId, copiedNode);\n        this.updateNodeCache();\n        this.invokeTreeUpdateListeners();\n        return true;\n    };\n    return TreeManager;\n}());\nexports.TreeManager = TreeManager;\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/managers/TreeManager.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/managers/TreeManager.tsx\"); } } })();\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./../../node_modules/timers-browserify/main.js */ 54).setImmediate))\n\n/***/ }),\n/* 54 */,\n/* 55 */,\n/* 56 */,\n/* 57 */\n/*!************************!*\\\n  !*** ./src/Status.tsx ***!\n  \\************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Status = /** @class */ (function () {\n    function Status() {\n        this.nodeErrors = {};\n        this.nodeVariables = {};\n    }\n    Status.prototype.addError = function (nodeId, error) {\n        if (!(nodeId in this.nodeErrors)) {\n            this.nodeErrors[nodeId] = [];\n        }\n        this.nodeErrors[nodeId].push(error);\n    };\n    Status.prototype.getErrorsForNode = function (nodeId) {\n        return (nodeId in this.nodeErrors ? this.nodeErrors[nodeId] : []);\n    };\n    Status.prototype.addVariables = function (nodeId, variables) {\n        if (!(nodeId in this.nodeVariables)) {\n            this.nodeVariables[nodeId] = [];\n        }\n        this.nodeVariables[nodeId].push(Object.assign({}, variables));\n    };\n    Status.prototype.getVariablesForNode = function (nodeId) {\n        if (!(nodeId in this.nodeVariables)) {\n            return [];\n        }\n        var variables = new Set();\n        this.nodeVariables[nodeId].forEach(function (map) {\n            Object.keys(map).forEach(function (key) {\n                return variables.add(key);\n            });\n        });\n        return Array.from(variables).sort();\n    };\n    return Status;\n}());\nexports.default = Status;\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/Status.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/Status.tsx\"); } } })();\n\n/***/ }),\n/* 58 */\n/*!******************************************!*\\\n  !*** ./src/components/GlobalToolbar.tsx ***!\n  \\******************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __webpack_require__(/*! react */ 0);\nvar Icon_1 = __webpack_require__(/*! ./Icon */ 59);\nvar cx = __webpack_require__(/*! classnames */ 17);\nvar GlobalToolbarIcons = {\n    fileTree: __webpack_require__(/*! material-design-icons-svg/paths/file-tree */ 60),\n    save: __webpack_require__(/*! material-design-icons-svg/paths/content-save */ 61),\n};\nvar GlobalToolbar = /** @class */ (function (_super) {\n    __extends(GlobalToolbar, _super);\n    function GlobalToolbar() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GlobalToolbar.prototype.render = function () {\n        var _this = this;\n        var tabs = [\n            { id: 'tree', icon: GlobalToolbarIcons.fileTree },\n            { id: 'file', icon: GlobalToolbarIcons.save },\n        ];\n        return (React.createElement(\"div\", { id: \"global-toolbar\", className: \"toolbar\" }, tabs.map(function (t) {\n            return React.createElement(\"div\", { key: t.id, className: cx('btn', { active: _this.props.activeTab === t.id }), title: t.id, onClick: function () { return _this.props.onChangeTab(t.id); } },\n                React.createElement(Icon_1.default, { path: t.icon }));\n        })));\n    };\n    return GlobalToolbar;\n}(React.Component));\nexports.default = GlobalToolbar;\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/components/GlobalToolbar.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/components/GlobalToolbar.tsx\"); } } })();\n\n/***/ }),\n/* 59 */\n/*!*********************************!*\\\n  !*** ./src/components/Icon.tsx ***!\n  \\*********************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __webpack_require__(/*! react */ 0);\nexports.default = (function (_a) {\n    var path = _a.path, props = _a.props;\n    return (React.createElement(\"svg\", __assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\" }, props),\n        React.createElement(\"path\", { d: path })));\n});\n\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/akx/build/coil/src/components/Icon.tsx\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/akx/build/coil/src/components/Icon.tsx\"); } } })();\n\n/***/ }),\n/* 60 */,\n/* 61 */,\n/* 62 */\n/*!************************!*\\\n  !*** ./src/style.scss ***!\n  \\************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n],[18]);\n\n\n// WEBPACK FOOTER //\n// client.ad9fd772.js","import Choose from './modify/Choose';\nimport Ellipse from './prim/Ellipse';\nimport LinearArray from './array/LinearArray';\nimport Module from './Module';\nimport Ngon from './prim/Ngon';\nimport Rect from './prim/Rect';\nimport RectArray from './array/RectArray';\nimport RemoveChildren from './modify/RemoveChildren';\nimport Xform from './modify/Xform';\n\nconst registry = {\n  Choose,\n  Ellipse,\n  LinearArray,\n  Ngon,\n  Rect,\n  RectArray,\n  RemoveChildren,\n  Xform,\n} as {[name: string]: Module};\nexport default registry;\n\nObject.keys(registry).forEach((name) => {\n  (registry[name].render as any).displayName = `render_${name}`;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/registry.ts","import {NodeConfig} from \"./NodeConfig\";\nimport registry from \"./modules/registry\";\nimport Context from \"./Context\";\nimport Module from \"./modules/Module\";\n\nexport function renderNode(context: Context, nodeConfig: NodeConfig) {\n  const module: Module = registry[nodeConfig.module];\n  if (!module) {\n    throw new Error(`not registered ${nodeConfig.module}`);\n  }\n  try {\n    context.status.addVariables(nodeConfig.id, context.variables);\n    return module.render(context.subcontext(nodeConfig, {}, nodeConfig.id));\n  } catch (e) {\n    console.error(e);\n    return [];\n  }\n}\n\nexport function renderNodesInto(targetArray: Array<any>, nodes: NodeConfig[], context: Context) {\n  for(var i = 0; i < nodes.length; i++) {\n    const renderedElts = renderNode(context, nodes[i]);\n    for(var j = 0; j < renderedElts.length; j++) {\n      targetArray.push(renderedElts[j]);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render.tsx","import VariableDefinition from './VariableDefinition';\n\nconst group = 'Transform';\nexport default [\n  {name: 'x', default: '0', group},\n  {name: 'y', default: '0', group},\n  {name: 'r', default: '0', group},\n  {name: 'sx', default: '1', group},\n  {name: 'sy', default: '1', group},\n] as VariableDefinition[];\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/TransformVariables.ts","import {rotateDEG, scale, translate} from 'transformation-matrix';\nimport {VariableMap} from '../types';\n\nconst multiply = (m1: Matrix, m2: Matrix): Matrix => {\n  return {\n    a: m1.a * m2.a + m1.c * m2.b,\n    b: m1.b * m2.a + m1.d * m2.b,\n    c: m1.a * m2.c + m1.c * m2.d,\n    d: m1.b * m2.c + m1.d * m2.d,\n    e: m1.a * m2.e + m1.c * m2.f + m1.e,\n    f: m1.b * m2.e + m1.d * m2.f + m1.f,\n  };\n};\n\nexport type TransformBag = {\n  x: number,\n  y: number,\n  r: number,\n  sx: number,\n  sy: number,\n};\n\nexport function makeMatrix({x, y, r, sx, sy}: TransformBag): Matrix {\n  let matrix = translate(isFinite(x) ? x : 0, isFinite(y) ? y : 0);\n  if (isFinite(r)) {\n    matrix = multiply(matrix, rotateDEG(r));\n  }\n  if (isFinite(sx) && isFinite(sy)) {\n    matrix = multiply(matrix, scale(sx, sy));\n  }\n  return matrix;\n}\n\nexport function splitMatrixAndProps(props: VariableMap): {\n  matrix: Matrix,\n  props: VariableMap,\n} {\n  const matrix = makeMatrix(props as TransformBag);\n  const newProps = Object.assign({}, props);\n  delete newProps.x;\n  delete newProps.y;\n  delete newProps.r;\n  delete newProps.sx;\n  delete newProps.sy;\n  return {matrix, props: newProps};\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/MatrixUtils.ts","import Module, {getVariableDefaults} from \"./modules/Module\";\nimport registry from \"./modules/registry\";\nimport {ExpressionMap} from \"./types\";\nimport {cloneDeep} from 'lodash';\n\nexport interface NodeConfig {\n  id: string;\n  module: string;\n  config: ExpressionMap;\n  children: Array<NodeConfig>;\n}\n\nfunction generateId() {\n  return `${Math.floor(Math.random() * 0xFFFFFFFF).toString(36)}`;\n}\n\nexport function duplicate(nodeConfig: NodeConfig): NodeConfig {\n  function walk(nodeConfig: NodeConfig): NodeConfig {\n    return {\n      id: generateId(),\n      module: nodeConfig.module,\n      config: cloneDeep(nodeConfig.config),\n      children: nodeConfig.children.map(walk),\n    };\n  }\n\n  return walk(nodeConfig);\n}\n\n\nexport function configure(\n  moduleName: string,\n  variables: { [key: string]: any },\n  children: Array<NodeConfig> = [],\n): NodeConfig {\n  const module: Module = registry[moduleName];\n  const defaults = getVariableDefaults(module);\n  return {\n    id: generateId(),\n    module: moduleName,\n    config: Object.assign({}, defaults, variables),\n    children,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/NodeConfig.tsx","import Context from '../Context';\nimport VariableDefinition from './VariableDefinition';\nimport {ReactElement} from 'react';\n\n// tslint:disable-next-line:interface-name\nexport default interface Module {\n  acceptsChildren: boolean;\n  variables: VariableDefinition[];\n  render(context: Context): Array<ReactElement<any>>;\n}\n\nexport function getVariableDefaults(module: Module): object {\n  const defaults = {};\n  module.variables.forEach((v) => {\n    defaults[v.name] = v.default;\n  });\n  return defaults;\n}\n\nexport const UniversalVariables = [\n  {name: 'seed', default: '', group: 'Randomness'},\n] as VariableDefinition[];\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/Module.tsx","import VariableDefinition from './VariableDefinition';\n\nconst group = 'Presentation';\nexport default [\n  {name: 'fill', default: '#333', group, type: 'color'},\n  {name: 'stroke', default: '', group, type: 'color'},\n  {name: 'strokeWidth', default: '0', group, type: 'number'},\n  {name: 'opacity', default: '1', group},\n] as VariableDefinition[];\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/PresentationVariables.ts","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport App from './App';\nimport './style.scss';\n\nconst wrapper = document.createElement('div');\nwrapper.id = 'wrapper';\ndocument.body.appendChild(wrapper);\n\nReactDOM.render(<App />, wrapper);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.tsx","import * as React from 'react';\nimport {configure, NodeConfig} from \"./NodeConfig\";\nimport NodeTree from \"./components/NodeTree\";\nimport NodeConfigView from \"./components/NodeConfigView\";\nimport Context from './Context';\nimport TreeToolbar from './components/TreeToolbar';\nimport {TreeManager} from \"./managers/TreeManager\";\nimport Status from \"./Status\";\nimport GlobalToolbar from \"./components/GlobalToolbar\";\n\nconst DEFAULT_NODE_CONFIGS: NodeConfig[] = [\n  configure(\n    'RemoveChildren',\n    {\n      'seed': 'foo',\n    },\n    [\n      configure(\n        'RectArray',\n        {\n          numberX: '7',\n          numberY: '7',\n          variableX: 'i',\n          variableY: 'j',\n        },\n        [\n          configure('Ngon', {\n            radius1: '15',\n            radius2: '5',\n            vertices: '10',\n            x: '=15 + i * 30',\n            y: '=30 + j * 30',\n            fill: 'blue',\n          }),\n        ]),\n    ]),\n];\n\ntype AppState = {\n  selectedNodeId: string | null,\n  rendered: any,\n  status: Status,\n  activeTab: string,\n};\n\nexport default class App extends React.Component<any, AppState> {\n\n  private treeManager: TreeManager = new TreeManager();\n\n  state = {\n    selectedNodeId: null,\n    rendered: null,\n    status: new Status(),\n    activeTab: 'tree',\n  };\n\n  componentDidMount() {\n    this.treeManager.addTreeUpdateListener((tree) => {\n      this.renderDrawing(tree);\n    });\n    this.treeManager.replaceTree(DEFAULT_NODE_CONFIGS);\n  }\n\n  onSelectNode = (nodeConfig: NodeConfig | null): void => {\n    this.setState({\n      selectedNodeId: (nodeConfig ? nodeConfig.id : null),\n    });\n  };\n\n  onChangeNodeVariable = (nodeConfig: NodeConfig, variableName: string, newValue: string) => {\n    this.treeManager.changeNodeVariable(nodeConfig.id, variableName, newValue);\n    this.forceUpdate();  // Avoid asynchronous input caret position problem :(\n  };\n\n  onRepositionNode = (sourceNodeId: string, targetNodeId: string, copy: boolean) => {\n    if (copy) {\n      this.treeManager.copyNode(sourceNodeId, targetNodeId);\n    } else {\n      this.treeManager.moveNode(sourceNodeId, targetNodeId);\n    }\n  };\n\n  renderDrawing(tree: NodeConfig[]) {\n    const status = new Status();\n    const rootPseudoNode = {id: 'root', module: 'root', config: {}, children: tree};\n    const context = new Context(status, rootPseudoNode);\n    const rendered = context.renderChildren();\n    this.setState({rendered, status});\n  }\n\n  onChangeTab = (tabId) => {\n    this.setState({activeTab: tabId});\n  };\n\n  render() {\n    const {selectedNodeId, rendered, status, activeTab} = this.state;\n    const {treeManager} = this;\n    const selectedNodeConfig = treeManager.getNodeOrNull(selectedNodeId!);\n    let configContent: React.ReactElement<any> | null = null;\n    switch (activeTab) {\n      case 'tree':\n        configContent = (\n          <>\n            <div id=\"hierarchy\">\n              <TreeToolbar treeManager={treeManager} selectedNode={selectedNodeConfig} />\n              <NodeTree\n                nodeConfigs={treeManager.getTree()}\n                selectedNode={selectedNodeConfig}\n                onSelectNode={this.onSelectNode}\n                onRepositionNode={this.onRepositionNode}\n              />\n            </div>\n            <div id=\"props\">\n              {selectedNodeConfig ?\n                <NodeConfigView\n                  nodeConfig={selectedNodeConfig!}\n                  status={status}\n                  onChange={this.onChangeNodeVariable}\n                />\n                : null\n              }\n            </div>\n          </>\n        );\n    }\n    return (\n      <>\n        <div id=\"config\">\n          <GlobalToolbar activeTab={activeTab} onChangeTab={this.onChangeTab} />\n          {configContent}\n        </div>\n        <div id=\"drawing\">\n          <svg width={800} height={800}>\n            {rendered}\n          </svg>\n        </div>\n      </>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/App.tsx","import * as React from 'react';\nimport Module from '../Module';\nimport Context from '../../Context';\nimport { renderNodesInto } from '../../render';\n\nexport default {\n  acceptsChildren: true,\n  variables: [\n    { name: 'childIndex', default: '0' },\n    { name: 'indexVariable', default: 'u' },\n  ],\n\n  render(context: Context) {\n    const { node } = context;\n    const { childIndex, indexVariable } = context.evaluateNodeConfig(node);\n    const index = parseInt(childIndex, 10);\n    const child = node.children[index % node.children.length];\n    const nodes = [];\n    if (child) {\n      const subcontext = context.subcontext(\n        node,\n        {\n          [indexVariable]: childIndex,\n        },\n        `child${childIndex}`,\n      );\n      renderNodesInto(nodes, [child], subcontext);\n    }\n    return nodes;\n  },\n} as Module;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/modify/Choose.tsx","import * as React from 'react';\nimport Module from '../Module';\nimport Context from '../../Context';\nimport {toSVG} from 'transformation-matrix';\nimport TransformVariables from '../TransformVariables';\nimport {splitMatrixAndProps} from '../MatrixUtils';\n\nexport default {\n  variables: TransformVariables.concat([\n    {name: 'radiusX', default: '20'},\n    {name: 'radiusY', default: '20'},\n    {name: 'fill', default: '#333'},\n    {name: 'opacity', default: '1'},\n  ]),\n\n  render(context: Context) {\n    const {props, matrix} = splitMatrixAndProps(context.evaluateNodeConfig());\n    const {radiusX, radiusY, fill, opacity} = props;\n    return [\n      <ellipse\n        cx={0}\n        cy={0}\n        rx={radiusX}\n        ry={radiusY}\n        fill={fill}\n        opacity={opacity}\n        transform={toSVG(matrix)}\n        key={context.getId()}\n      />,\n    ];\n  },\n} as Module;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/prim/Ellipse.tsx","import * as React from 'react';\nimport Module from '../Module';\nimport Context from '../../Context';\nimport {renderNodesInto} from '../../render';\n\nexport default {\n  acceptsChildren: true,\n  variables: [\n    {name: 'number', default: '5'},\n    {name: 'variable', default: 'i'},\n  ],\n\n  render(context: Context) {\n    // tslint:disable-next-line:variable-name\n    const {number, variable} = context.evaluateNodeConfig();\n    const nodes = [];\n    const nNumber = Math.round(parseFloat(number));\n    const node = context.node;\n    for (let i = 0; i < nNumber; i++) {\n      const subcontext = context.subcontext(node, {\n        [variable]: i,\n        [`${variable}F`]: i / (nNumber - 1),\n      }, `${i}`);\n      renderNodesInto(nodes, node.children, subcontext);\n    }\n    return nodes;\n  },\n} as Module;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/array/LinearArray.tsx","import * as React from 'react';\nimport Context from '../../Context';\nimport TransformVariables from '../TransformVariables';\nimport {splitMatrixAndProps} from '../MatrixUtils';\nimport PresentationVariables from '../PresentationVariables';\nimport Module from '../Module';\nimport {toSVG} from 'transformation-matrix';\nimport dumbMemoize from '../../dumbMemoize';\n\nconst TWO_PI = Math.PI * 2;\n\nconst generatePathString = dumbMemoize(\n  (vertices, radius1, radius2, tilt1, tilt2) => {\n    const path: string[] = [];\n    radius1 = parseFloat(radius1);\n    radius2 = parseFloat(radius2);\n    tilt1 = parseFloat(tilt1);\n    tilt2 = parseFloat(tilt2);\n    for (let i = 0; i < vertices; i++) {\n      const f = i / vertices;\n      const radius = (i % 2 === 0 ? radius1 : radius2);\n      const angle = (f + (i % 2 === 0 ? tilt1 : tilt2)) * TWO_PI;\n      const x = Math.cos(angle) * radius;\n      const y = Math.sin(angle) * radius;\n      if (!(isNaN(x) || isNaN(y))) {\n        path.push(`${i === 0 ? 'M' : 'L'}${x.toFixed(3)},${y.toFixed(3)}`);\n      }\n    }\n    if (path.length > 0) {\n      path.push('z');\n    }\n    return path.join(' ');\n  },\n);\n\nexport default {\n  variables: TransformVariables.concat(PresentationVariables).concat([\n    {name: 'vertices', default: '5'},\n    {name: 'radius1', default: '5'},\n    {name: 'radius2', default: '5'},\n    {name: 'tilt1', default: '0'},\n    {name: 'tilt2', default: '0'},\n  ]),\n\n  render(context: Context) {\n    const {node} = context;\n    const {props, matrix} = splitMatrixAndProps(context.evaluateNodeConfig(node));\n    const path = generatePathString(props.vertices, props.radius1, props.radius2, props.tilt1, props.tilt2);\n\n    delete props.vertices;\n    delete props.radius1;\n    delete props.radius2;\n    delete props.tilt1;\n    delete props.tilt2;\n    return [<path\n      d={path}\n      {...props}\n      key={context.getId(node.id)}\n      transform={toSVG(matrix)}\n    />];\n  },\n} as Module;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/prim/Ngon.tsx","export default function dumbMemoize<T>(fn: (...args) => T): (...args) => T {\n  const memo: { [args: string]: T } = {};\n  const memoizedFn = (...args) => {\n    const argsStr = args.join('\\x01');\n    if (argsStr in memo) return memo[argsStr];\n    return memo[argsStr] = fn(...args);\n  };\n  (memoizedFn as any).memo = memo;\n  return memoizedFn;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dumbMemoize.ts","import * as React from 'react';\nimport Module from '../Module';\nimport Context from '../../Context';\nimport {toSVG} from 'transformation-matrix';\nimport TransformVariables from '../TransformVariables';\nimport {splitMatrixAndProps} from '../MatrixUtils';\nimport PresentationVariables from '../PresentationVariables';\n\nexport default {\n  variables: TransformVariables.concat(PresentationVariables).concat([\n    {name: 'width', default: '20'},\n    {name: 'height', default: '20'},\n  ]),\n\n  render(context: Context) {\n    const {node} = context;\n    const {props, matrix} = splitMatrixAndProps(context.evaluateNodeConfig(node));\n    return [\n      <rect\n        x={-props.width / 2}\n        y={-props.height / 2}\n        transform={toSVG(matrix)}\n        key={context.getId()}\n        {...props}\n      />,\n    ];\n  },\n} as Module;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/prim/Rect.tsx","import * as React from 'react';\nimport Module from '../Module';\nimport Context from '../../Context';\nimport {renderNodesInto} from '../../render';\n\nexport default {\n  acceptsChildren: true,\n  variables: [\n    {name: 'numberX', default: '5'},\n    {name: 'numberY', default: '5'},\n    {name: 'variableX', default: 'vx'},\n    {name: 'variableY', default: 'vy'},\n  ],\n\n  render(context: Context) {\n    const {node} = context;\n    // tslint:disable-next-line:prefer-const\n    let {numberX, numberY, variableX, variableY} = context.evaluateNodeConfig(node);\n    const nodes = [];\n\n    numberX = Math.round(parseFloat(numberX));\n    numberY = Math.round(parseFloat(numberY));\n    for (let y = 0; y < numberY; y++) {\n      for (let x = 0; x < numberX; x++) {\n        const subcontext = context.subcontext(node, {\n          [variableX]: x,\n          [variableY]: y,\n          [`${variableX}F`]: x / (numberX - 1),\n          [`${variableY}F`]: y / (numberY - 1),\n        }, `${x}x${y}`);\n        renderNodesInto(nodes, node.children, subcontext);\n      }\n    }\n    return nodes;\n  },\n} as Module;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/array/RectArray.tsx","import * as React from 'react';\nimport Module from '../Module';\nimport Context from '../../Context';\nimport {renderNodesInto} from '../../render';\n\nexport default {\n  acceptsChildren: true,\n  variables: [\n    {name: 'keep', default: '=rand() < .5'},\n    {name: 'indexVariable', default: 'i'},\n  ],\n\n  render(context: Context) {\n    const node = context.node;\n    const indexVariable = context.evaluateFromNodeConfig('indexVariable');\n    const nodes = [];\n    renderNodesInto(nodes, node.children, context);\n    const filterContext = context.subcontext(node);\n    const keepExpression = node.config.keep!;\n    return nodes.filter((child, index) => (\n      filterContext.evaluate(`keep ${index}`, keepExpression, {[indexVariable]: index})\n    ));\n  },\n} as Module;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/modify/RemoveChildren.tsx","import * as React from 'react';\nimport Module from '../Module';\nimport Context from '../../Context';\nimport TransformVariables from '../TransformVariables';\nimport {toSVG} from 'transformation-matrix';\nimport {splitMatrixAndProps} from '../MatrixUtils';\n\nexport default {\n  acceptsChildren: true,\n  variables: TransformVariables.concat([\n    {name: 'opacity', default: '1'},\n  ]),\n\n  render(context: Context) {\n    const nodes = context.renderChildren();\n    const {props, matrix} = splitMatrixAndProps(context.evaluateNodeConfig());\n    const {opacity} = props;\n    return [<g transform={toSVG(matrix)} opacity={opacity}>{nodes}</g>];\n  },\n} as Module;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/modify/Xform.tsx","import * as React from 'react';\nimport {NodeConfig} from '../NodeConfig';\nimport registry from '../modules/registry';\n\ntype TreeCommonProps = {\n  selectedNode: NodeConfig | null,\n  onSelectNode: (node: NodeConfig | null) => void,\n  onRepositionNode: (sourceNodeId: string, targetNodeId: string, copy: boolean) => void,\n};\n\ntype TreeNodeProps = TreeCommonProps & {\n  nodeConfig: NodeConfig,\n};\n\ntype TreeLevelProps = TreeCommonProps & {\n  nodeConfigs: ReadonlyArray<NodeConfig>,\n};\n\nconst DRAG_AND_DROP_DATA_ID = 'application/x-coil-nodeid';\n\nconst TreeNode = ({nodeConfig, selectedNode, onSelectNode, onRepositionNode}: TreeNodeProps) => (\n  <li className={selectedNode === nodeConfig ? 'selected' : ''}>\n    <a\n      href=\"#\"\n      draggable={true}\n      onClick={(e) => {\n        onSelectNode(nodeConfig);\n        e.preventDefault();\n        e.stopPropagation();\n      }}\n      onDragStart={(event) => {\n        event.dataTransfer.clearData();\n        event.dataTransfer.setData(DRAG_AND_DROP_DATA_ID, nodeConfig.id);\n        event.dataTransfer.effectAllowed = 'all';\n      }}\n      onDragOver={(event) => {\n        event.dataTransfer.dropEffect = 'none';\n        if (event.dataTransfer.types.indexOf(DRAG_AND_DROP_DATA_ID) > -1) {\n          if (registry[nodeConfig.module].acceptsChildren) {\n            event.dataTransfer.dropEffect = (event.altKey ? 'copy' : 'link');\n            event.preventDefault();\n          }\n        }\n      }}\n      onDrop={(event) => {\n        const sourceNodeId = event.dataTransfer.getData(DRAG_AND_DROP_DATA_ID);\n        event.dataTransfer.dropEffect = (event.altKey ? 'copy' : 'link');\n        const copy = (event.dataTransfer.dropEffect === 'copy');\n        onRepositionNode(sourceNodeId, nodeConfig.id, copy);\n      }}\n    >\n      {nodeConfig.module}\n    </a>\n    {nodeConfig.children.length ?\n      <TreeLevel\n        nodeConfigs={nodeConfig.children}\n        selectedNode={selectedNode}\n        onSelectNode={onSelectNode}\n        onRepositionNode={onRepositionNode}\n      />\n      : null\n    }\n  </li>\n);\n\nconst TreeLevel = ({nodeConfigs, selectedNode, onSelectNode, onRepositionNode}: TreeLevelProps) => (\n  <ul>\n    {nodeConfigs.map((nodeConfig: NodeConfig) => (\n      <TreeNode\n        key={nodeConfig.id}\n        nodeConfig={nodeConfig}\n        selectedNode={selectedNode}\n        onSelectNode={onSelectNode}\n        onRepositionNode={onRepositionNode}\n      />\n    ))}\n  </ul>\n);\n\nexport default ({nodeConfigs, selectedNode, onSelectNode, onRepositionNode}: TreeLevelProps) => {\n  return (\n    <div\n      id=\"tree\"\n      onClick={(e) => {\n        if (e.currentTarget.id === 'tree') {\n          onSelectNode(null);\n        }\n      }}\n    >\n      <TreeLevel\n        nodeConfigs={nodeConfigs}\n        selectedNode={selectedNode}\n        onSelectNode={onSelectNode}\n        onRepositionNode={onRepositionNode}\n      />\n    </div>\n  );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/NodeTree.tsx","import * as React from 'react';\nimport {NodeConfig} from '../NodeConfig';\nimport registry from '../modules/registry';\nimport Module, {UniversalVariables} from '../modules/Module';\nimport VariableDefinition from '../modules/VariableDefinition';\nimport Status from '../Status';\nimport {groupBy} from 'lodash';\nimport {ChangeNodeConfigHandler} from '../types';\n\ntype NodeConfigViewProps = {\n  nodeConfig: NodeConfig,\n  onChange: ChangeNodeConfigHandler,\n  status: Status,\n};\n\ntype VariableConfigRowProps = {\n  variable: VariableDefinition,\n  nodeConfig: NodeConfig,\n  onChange: ChangeNodeConfigHandler,\n  status: Status,\n};\n\nconst VariableConfigRow = ({variable, nodeConfig, onChange, status}: VariableConfigRowProps) => {\n  let extraControls: React.ReactElement<any> | null = null;\n\n  const handleChange = ((event) => onChange(\n    nodeConfig,\n    variable.name,\n    event.target.value.toString(),\n  ));\n  if (variable.type === 'color') {\n    extraControls = (\n      <input type=\"color\" value={nodeConfig.config[variable.name] || ''} onChange={handleChange} />\n    );\n  }\n  return (\n    <tr className=\"variable-config-row\">\n      <th>\n        {variable.name}\n      </th>\n      <td>\n        <input\n          type=\"text\"\n          value={nodeConfig.config[variable.name] || ''}\n          onChange={handleChange}\n        />\n      </td>\n      <td>\n        {extraControls}\n      </td>\n    </tr>\n  );\n};\n\nexport default class NodeConfigView extends React.Component<NodeConfigViewProps, any> {\n  render() {\n    const {nodeConfig, status} = this.props;\n    const moduleClass: Module = registry[nodeConfig.module];\n    const variableDefinitions = moduleClass.variables.concat(UniversalVariables);\n    const variablesByGroup = groupBy(variableDefinitions, (v) => (v.group || 'Other'));\n\n    return (\n      <div>\n        <table>\n          <tbody>\n            {Object.keys(variablesByGroup).sort().map((group) => <React.Fragment key={group}>\n                <tr key={`#${group}`} className=\"group-separator\">\n                  <th colSpan={3}>{group}</th>\n                </tr>\n                {variablesByGroup[group].map((variable: VariableDefinition) => (\n                  <VariableConfigRow\n                    key={variable.name}\n                    variable={variable}\n                    nodeConfig={nodeConfig}\n                    status={status}\n                    onChange={this.props.onChange}\n                  />\n                ))}\n              </React.Fragment>,\n            )}\n          </tbody>\n        </table>\n        <div className=\"debug\">\n          Variables last render: {status.getVariablesForNode(nodeConfig.id).join(', ')}\n        </div>\n        <ul className=\"errors\">\n          {status.getErrorsForNode(nodeConfig.id).map((err, i) => <li key={i}>{err}</li>)}\n        </ul>\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/NodeConfigView.tsx","import Status from \"./Status\";\nimport {NodeConfig} from \"./NodeConfig\";\nimport {ExpressionMap, VariableMap} from \"./types\";\nimport {default as createRandomGenerator, RandomGenerator} from \"./RandomGenerator\";\nimport {evaluateExpression, NamespaceFn} from \"./evaluator\";\nimport {renderNodesInto} from \"./render\";\n\n\nfunction _evaluate(\n  status: Status,\n  node: NodeConfig,\n  tag: string,\n  expression: string,\n  namespace: NamespaceFn,\n  errorDefault: any = null,\n): any {\n  try {\n    return evaluateExpression(expression, namespace);\n  } catch (err) {\n    status.addError(node.id, `${tag}: ${err}`);\n    console.warn(err);\n    return errorDefault;\n  }\n}\n\nfunction memoizeOnFirstInvocation<T>(creator: () => T): () => T {\n  let t: T | undefined;\n  return () => {\n    if (t === undefined) {\n      t = creator();\n    }\n    return t;\n  };\n}\n\n\nexport default class Context {\n  private rng?: RandomGenerator;\n  private defaultNamespace: NamespaceFn;\n\n  constructor(\n    readonly status: Status,\n    readonly node: NodeConfig,\n    readonly parent: Context | null = null,\n    readonly variables: VariableMap = {},\n    readonly idPrefix: string = '',\n  ) {\n    this.defaultNamespace = this.prepareNamespace();\n  }\n\n  subcontext(\n    forNode: NodeConfig,\n    newVariables: VariableMap = {},\n    idPrefix: String = '',\n  ): Context {\n    const mergedVariables = Object.assign({}, this.variables, newVariables);\n    return new Context(\n      this.status,\n      forNode,\n      this,\n      mergedVariables,\n      `${this.idPrefix}.${idPrefix}`,\n    );\n  }\n\n  random(min?: number, max?: number) {\n    if (!this.rng) {\n      const seed = this.evaluateFromNodeConfig('seed');\n      this.rng = createRandomGenerator(seed);\n    }\n    const val = this.rng();\n    if (min !== undefined) {\n      if (max === undefined) {\n        return val * min;\n      }\n      return min + val * (max - min);\n    }\n    return val;\n  }\n\n  prepareNamespace(additionalVariables?: VariableMap): NamespaceFn {\n    return memoizeOnFirstInvocation(() => ({\n      rand: this.random.bind(this),\n      ...this.variables,\n      ...additionalVariables,\n    }));\n  }\n\n  evaluateFromNodeConfig(key: string): any {\n    const expression = this.node.config[key]!;\n    if (expression === undefined) return null;\n    return _evaluate(this.status, this.node, key, expression, this.defaultNamespace);\n  }\n\n  evaluate(tag: string, expression: string, additionalVariables?: VariableMap): any {\n    const namespace = this.prepareNamespace(additionalVariables);\n    return _evaluate(this.status, this.node, tag, expression, namespace);\n  }\n\n  evaluateAll(\n    node: NodeConfig,\n    expressionMap: ExpressionMap,\n    additionalVariables?: VariableMap,\n  ): VariableMap {\n    const evaluated = {};\n    const namespace = this.prepareNamespace(additionalVariables);\n    for (let tag in expressionMap) {\n      const expression = expressionMap[tag];\n      if (expression !== null) {\n        evaluated[tag] = _evaluate(this.status, this.node, tag, expression, namespace);\n      }\n    }\n    return evaluated;\n  }\n\n  evaluateNodeConfig(node: NodeConfig = this.node): VariableMap {\n    return this.evaluateAll(node, node.config);\n  }\n\n  getId(suffix: string = this.node.id) {\n    return this.idPrefix + suffix;\n  }\n\n  renderChildren(context: Context = this) {\n    const nodes: Array<Element> = [];\n    renderNodesInto(nodes, this.node.children, context);\n    return nodes;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Context.tsx","function hashString(string: String) {\n  let seed = 0;\n  for (var i = 0; i < string.length; i++) {\n    seed ^= (i % 16) << string.charCodeAt(i);\n  }\n  return seed;\n}\n\n// Based on https://gist.github.com/blixt/f17b47c62508be59987b\n// which is based on http://www.firstpr.com.au/dsp/rand31/\n\n\nexport type RandomGenerator = () => number;\n\nexport default function createRandomGenerator(seedString?: string): RandomGenerator {\n  let seed = (seedString ? hashString(seedString) : (Math.random() * 2147483647));\n\n  const next = () => {\n    return seed = seed * 16807 % 2147483647;\n  };\n\n  return function nextFloat() {\n    return (next() - 1) / 2147483646;\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/RandomGenerator.ts","import {VariableMap} from \"./types\";\n\nexport type NamespaceFn = () => VariableMap;\n\nconst expressionFnCache = {};\n\nexport function evaluateExpression(expression: string, namespace: NamespaceFn): any {\n  if (expression.startsWith('=')) {\n    const exprFun = (\n      expression in expressionFnCache ?\n        expressionFnCache[expression] :\n        expressionFnCache[expression] = new Function('namespace', `with(namespace) { return ${expression.slice(1)}}`)\n    );\n    return exprFun(namespace());\n  }\n  if (/[+-][0-9.]+/.test(expression)) {\n    return parseFloat(expression);\n  }\n  return `${expression}`;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/evaluator.ts","import * as React from 'react';\nimport Dropdown, {DropdownContent, DropdownTrigger} from 'react-simple-dropdown';\nimport {NodeConfig} from '../NodeConfig';\nimport registry from '../modules/registry';\nimport {TreeManager} from '../managers/TreeManager';\n\ntype ToolbarProps = {\n  treeManager: TreeManager,\n  selectedNode: NodeConfig | null,\n};\n\nfunction nodeAcceptsChildren(node: NodeConfig | null) {\n  return (node && registry[node.module] && registry[node.module].acceptsChildren);\n}\n\nexport default class TreeToolbar extends React.Component<ToolbarProps, any> {\n  private dropdowns: { [key: string]: Dropdown } = {};\n\n  private handleAddNode(method: 'wrap' | 'child' | 'sibling', module: string) {\n    const {treeManager, selectedNode} = this.props;\n    switch (method) {\n      case 'child':\n        treeManager.addChildNode((selectedNode ? selectedNode.id : null), module);\n        break;\n      case 'sibling':\n        treeManager.addSiblingNode(selectedNode!.id, module);\n        break;\n      case 'wrap':\n        treeManager.wrapNode(selectedNode!.id, module);\n    }\n    this.hideDropdowns();\n  }\n\n  private handleDeleteNode(withHierarchy: boolean) {\n    const {treeManager, selectedNode} = this.props;\n    treeManager.deleteNode(selectedNode!.id, withHierarchy);\n  }\n\n  hideDropdowns() {\n    Object.values(this.dropdowns).forEach((dropdown) => {\n      return dropdown.hide();\n    });\n  }\n\n  render() {\n    const {selectedNode} = this.props;\n    let childMode: string | null = null;\n    let childText: string = 'Node';\n    let allowAddSibling = false;\n    if (selectedNode === null) {\n      childMode = 'child';\n      childText = 'Node';\n    }\n    if (nodeAcceptsChildren(selectedNode)) {\n      childMode = 'child';\n      childText = 'Child';\n    }\n    if (selectedNode) {\n      const parent = this.props.treeManager.getNodeParentOrNull(selectedNode.id);\n      if (parent === null || nodeAcceptsChildren(parent)) {\n        allowAddSibling = true;\n      }\n    }\n    return (\n      <div id=\"tree-toolbar\" className=\"toolbar\">\n        <Dropdown\n          disabled={!selectedNode}\n          ref={(instance) => {\n            this.dropdowns.wrap = instance;\n          }}\n        >\n          <DropdownTrigger className=\"btn\">Wrap...</DropdownTrigger>\n          <DropdownContent className=\"node-select\">\n            {Object.keys(registry).filter((module) => registry[module].acceptsChildren).map((module) => (\n              <a href=\"#\" key={module} onClick={() => this.handleAddNode('wrap', module)}>{module}</a>\n            ))}\n          </DropdownContent>\n        </Dropdown>\n        <Dropdown\n          disabled={!childMode}\n          ref={(instance) => {\n            this.dropdowns.addChild = instance;\n          }}\n        >\n          <DropdownTrigger className=\"btn\">Add {childText}...</DropdownTrigger>\n          <DropdownContent className=\"node-select\">\n            {Object.keys(registry).map((module) => (\n              <a href=\"#\" key={module} onClick={() => this.handleAddNode('child', module)}>{module}</a>\n            ))}\n          </DropdownContent>\n        </Dropdown>\n        <Dropdown\n          disabled={!allowAddSibling}\n          ref={(instance) => {\n            this.dropdowns.addSibling = instance;\n          }}\n        >\n          <DropdownTrigger className=\"btn\">Add Sibling...</DropdownTrigger>\n          <DropdownContent className=\"node-select\">\n            {Object.keys(registry).map((module) => (\n              <a href=\"#\" key={module} onClick={() => this.handleAddNode('sibling', module)}>{module}</a>\n            ))}\n          </DropdownContent>\n        </Dropdown>\n        <div\n          className={'btn ' + (selectedNode ? '' : 'disabled')}\n          title=\"Shift-click to delete with hierarchy\"\n          onClick={(event) => {\n            this.handleDeleteNode(event.shiftKey);\n            event.preventDefault();\n          }}\n        >\n          Delete\n        </div>\n      </div>\n    );\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/TreeToolbar.tsx","import {NodeConfig, configure, duplicate} from '../NodeConfig';\nimport {cloneDeep} from 'lodash';\n\ntype NodeCacheEntry = {\n  node: NodeConfig,\n  parent: NodeConfig | null,\n};\nexport type NodeCacheType = {\n  [key: string]: NodeCacheEntry,\n};\nexport type UpdateListener = (root: NodeConfig[]) => void;\n\nexport class TreeManager {\n  private tree: NodeConfig[] = [];\n  private nodeCache: NodeCacheType = {};\n  private treeUpdateListeners: UpdateListener[] = [];\n\n  public replaceTree(newTree: NodeConfig[]) {\n    this.tree = cloneDeep(newTree);\n    this.updateNodeCache();\n    this.invokeTreeUpdateListeners();\n  }\n\n  private updateNodeCache() {\n    const newNodeCache: NodeCacheType = {};\n\n    function walk(node: NodeConfig, parent: NodeConfig | null) {\n      newNodeCache[node.id] = {node, parent};\n      node.children.forEach((child) => walk(child, node));\n    }\n\n    this.tree.forEach((node) => walk(node, null));\n    this.nodeCache = newNodeCache;\n  }\n\n  private invokeTreeUpdateListeners() {\n    setImmediate(() => {\n      this.treeUpdateListeners.forEach((listener) => {\n        listener(this.tree);\n      });\n    });\n  }\n\n  public getNodeOrNull(nodeId: string): NodeConfig | null {\n    const cacheEntry = this.getNodeCacheEntry(nodeId, false);\n    return (cacheEntry ? cacheEntry.node : null);\n  }\n\n  public getNodeParentOrNull(nodeId: string): NodeConfig | null {\n    const cacheEntry = this.getNodeCacheEntry(nodeId, false);\n    return (cacheEntry ? cacheEntry.parent : null);\n  }\n\n  private getNode(nodeId: string): NodeConfig {\n    return this.getNodeCacheEntry(nodeId)!.node;\n  }\n\n  private getNodeParent(nodeId: string): NodeConfig | null {\n    return this.getNodeCacheEntry(nodeId)!.parent;\n  }\n\n  private getNodeCacheEntry(nodeId: string, check: boolean = true): NodeCacheEntry | null {\n    const cacheEntry = this.nodeCache[nodeId];\n    if (check && !cacheEntry) {\n      throw new Error(`invalid node ${nodeId}`);\n    }\n    return (cacheEntry ? cacheEntry : null);\n  }\n\n  private replaceOrEmsiblingNode(\n    parent: NodeConfig | null,\n    nodeToReplace: NodeConfig,\n    newNodes: ReadonlyArray<NodeConfig>,\n    replace: boolean,\n  ) {\n    const childList = (parent === null ? this.tree : parent.children);\n    const childIndex = childList.indexOf(nodeToReplace);\n    if (childIndex > -1) {\n      const args = ([childIndex, (replace ? 1 : 0)] as any[]).concat(newNodes);\n      childList.splice.apply(childList, args);\n    }\n  }\n\n  public getTree(): ReadonlyArray<NodeConfig> {\n    return this.tree;\n  }\n\n  public addTreeUpdateListener(listener: UpdateListener) {\n    this.treeUpdateListeners.push(listener);\n  }\n\n  public changeNodeVariable(nodeId: string, variableName: string, value: any) {\n    const node = this.getNode(nodeId);\n    node.config[variableName] = value;\n    this.invokeTreeUpdateListeners();\n  }\n\n  public addChildNode(parentNodeId: string | null, module: string) {\n    const newNode = configure(module, {});\n    this.addChildInternal(parentNodeId, newNode);\n    this.updateNodeCache();\n    this.invokeTreeUpdateListeners();\n    return newNode;\n  }\n\n  private addChildInternal(parentNodeId: string | null, newNode) {\n    if (parentNodeId) {\n      const parentNode = this.getNode(parentNodeId);\n      parentNode.children.push(newNode);\n      return parentNode;\n    } else {\n      this.tree.push(newNode);\n      return null;\n    }\n  }\n\n  public wrapNode(parentNodeId: string, module: string) {\n    const wrappedNode = this.getNode(parentNodeId);\n    const wrappedNodeParent = this.getNodeParent(parentNodeId);\n    const wrapperNode = configure(module, {}, [wrappedNode]);\n    this.replaceOrEmsiblingNode(wrappedNodeParent, wrappedNode, [wrapperNode], true);\n    this.updateNodeCache();\n    this.invokeTreeUpdateListeners();\n    return wrapperNode;\n  }\n\n  public deleteNode(nodeId: string, withHierarchy: boolean) {\n    const doomedNode = this.getNode(nodeId);\n    const doomedNodeParent = this.getNodeParent(nodeId);\n    this.replaceOrEmsiblingNode(doomedNodeParent, doomedNode, (withHierarchy ? [] : doomedNode.children), true);\n    this.updateNodeCache();\n    this.invokeTreeUpdateListeners();\n  }\n\n  public addSiblingNode(nodeId: string, module: string) {\n    const newNode = configure(module, {});\n    const node = this.getNode(nodeId);\n    const nodeParent = this.getNodeParent(nodeId);\n    this.replaceOrEmsiblingNode(nodeParent, node, [newNode], false);\n    this.updateNodeCache();\n    this.invokeTreeUpdateListeners();\n  }\n\n  moveNode(sourceNodeId: string, newParentNodeId: string | null) {\n    if (sourceNodeId === newParentNodeId) {\n      return false;\n    }\n    const sourceNode = this.getNode(sourceNodeId);\n    const sourceNodeParent = this.getNodeParent(sourceNodeId);\n    // Remove from parent...\n    this.replaceOrEmsiblingNode(sourceNodeParent, sourceNode, [], true);\n    // Add to new parent.\n    this.addChildInternal(newParentNodeId, sourceNode);\n    this.updateNodeCache();\n    this.invokeTreeUpdateListeners();\n    return true;\n  }\n\n  copyNode(sourceNodeId: string, targetNodeId: string | null) {\n    const copiedNode = duplicate(this.getNode(sourceNodeId));\n    this.addChildInternal(targetNodeId, copiedNode);\n    this.updateNodeCache();\n    this.invokeTreeUpdateListeners();\n    return true;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/managers/TreeManager.tsx","import {VariableMap} from \"./types\";\n\nexport default class Status {\n  private nodeErrors: { [key: string]: string[] } = {};\n  private nodeVariables: { [key: string]: VariableMap[] } = {};\n\n  public addError(nodeId: string, error: string) {\n    if (!(nodeId in this.nodeErrors)) {\n      this.nodeErrors[nodeId] = [];\n    }\n    this.nodeErrors[nodeId].push(error);\n  }\n\n  public getErrorsForNode(nodeId: string): ReadonlyArray<string> {\n    return (nodeId in this.nodeErrors ? this.nodeErrors[nodeId] : []);\n  }\n\n\n  public addVariables(nodeId: string, variables: VariableMap) {\n    if (!(nodeId in this.nodeVariables)) {\n      this.nodeVariables[nodeId] = [];\n    }\n    this.nodeVariables[nodeId].push(Object.assign({}, variables));\n  }\n\n  public getVariablesForNode(nodeId: string): string[] {\n    if(!(nodeId in this.nodeVariables)) {\n      return [];\n    }\n    const variables = new Set();\n    this.nodeVariables[nodeId].forEach((map) => {\n      Object.keys(map).forEach((key) => {\n        return variables.add(key);\n      });\n    });\n    return Array.from(variables).sort();\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Status.tsx","import * as React from 'react';\nimport Icon from './Icon';\nimport * as cx from 'classnames';\n\nconst GlobalToolbarIcons = {\n  fileTree: require('material-design-icons-svg/paths/file-tree'),\n  save: require('material-design-icons-svg/paths/content-save'),\n};\n\nexport default class GlobalToolbar extends React.Component<{\n  activeTab: string,\n  onChangeTab: (id: string) => void,\n}, any> {\n  render() {\n    const tabs = [\n      {id: 'tree', icon: GlobalToolbarIcons.fileTree},\n      {id: 'file', icon: GlobalToolbarIcons.save},\n    ];\n    return (\n      <div id=\"global-toolbar\" className=\"toolbar\">\n        {tabs.map((t) =>\n          <div\n            key={t.id}\n            className={cx('btn', {active: this.props.activeTab === t.id})}\n            title={t.id}\n            onClick={() => this.props.onChangeTab(t.id)}\n          >\n            <Icon path={t.icon} />\n          </div>,\n        )}\n      </div>\n    );\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/GlobalToolbar.tsx","import * as React from 'react';\n\nexport default ({path, props}: { path: string, props?: object }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" {...props}>\n    <path d={path} />\n  </svg>\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Icon.tsx"],"sourceRoot":""}